<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Rafael Henrique de Sousa Vieira">
  <meta name="keywords"
    content="programação, html, css, frontend mentor, Tip calculator app, Rafael Henrique de Sousa Vieira, Frontend, Front, end">
  <meta name="robots" content="index, follow">
  <meta name="description"
    content="A perfect opportunity to practice your CSS Grid skills. For anyone wanting to take it up a notch, we provide a JSON data file to practice working with data.">
  <link rel="icon" type="image.png" sizes="32x32" href="images/favicon-32x32.png">

  <title>Frontend Mentor | Time tracking dashboard</title>

  <link rel="stylesheet" href="style.css">
</head>

<body>
  <main>
    <div class="person">
      <div class="person_info">
        <img src="images/image-jeremy.png" alt="image-jeremy.png">

        <div class="text">
          <p>Report for</p>
          <h2>Jeremy Robson</h2>
        </div>
      </div>

      <div class="options">
        <p class="daily">Daily</p>
        <p class="weekly current_option">Weekly</p>
        <p class="monthly">Monthly</p>
      </div>
    </div>

    <div class="dashboard">
      <div class="card">
        <div class="background">
          <img class='img_card' src="images/" alt="">
        </div>

        <div class="main_card">
          <header>
            <h3 class="title_card">Title</h3>
            <img src="images/icon-ellipsis.svg" alt="icon-ellipsis.svg">
          </header>

          <p class="current_time">0hrs</p>
          <p class="last_time">Last week - 0hrs</p>
        </div>
      </div>

      <div class="card">
        <div class="background">
          <img class='img_card' src="images/" alt="">
        </div>

        <div class="main_card">
          <header>
            <h3 class="title_card">Title</h3>
            <img src="images/icon-ellipsis.svg" alt="icon-ellipsis.svg">
          </header>

          <p class="current_time">0hrs</p>
          <p class="last_time">Last week - 0hrs</p>
        </div>
      </div>

      <div class="card">
        <div class="background">
          <img class='img_card' src="images/" alt="">
        </div>

        <div class="main_card">
          <header>
            <h3 class="title_card">Title</h3>
            <img src="images/icon-ellipsis.svg" alt="icon-ellipsis.svg">
          </header>

          <p class="current_time">0hrs</p>
          <p class="last_time">Last week - 0hrs</p>
        </div>
      </div>

      <div class="card">
        <div class="background">
          <img class='img_card' src="images/" alt="">
        </div>

        <div class="main_card">
          <header>
            <h3 class="title_card">Title</h3>
            <img src="images/icon-ellipsis.svg" alt="icon-ellipsis.svg">
          </header>

          <p class="current_time">0hrs</p>
          <p class="last_time">Last week - 0hrs</p>
        </div>
      </div>

      <div class="card">
        <div class="background">
          <img class='img_card' src="images/" alt="">
        </div>

        <div class="main_card">
          <header>
            <h3 class="title_card">Title</h3>
            <img src="images/icon-ellipsis.svg" alt="icon-ellipsis.svg">
          </header>

          <p class="current_time">0hrs</p>
          <p class="last_time">Last week - 0hrs</p>
        </div>
      </div>

      <div class="card">
        <div class="background">
          <img class='img_card' src="images/" alt="">
        </div>

        <div class="main_card">
          <header>
            <h3 class="title_card">Title</h3>
            <img src="images/icon-ellipsis.svg" alt="icon-ellipsis.svg">
          </header>

          <p class="current_time">0hrs</p>
          <p class="last_time">Last week - 0hrs</p>
        </div>
      </div>
    </div>
  </main>

  <footer class="attribution">
    <p>Challenge by <a href="https://www.frontendmentor.io?ref=challenge" target="_blank">Frontend Mentor</a>.</p>
    <p>Coded by <a href="https://github.com/RafaelHDSV" target="_blank">Rafael Henrique de Sousa Vieira</a>.</p>
  </footer>

  <script>
    let daily = document.querySelector('.daily')
    let weekly = document.querySelector('.weekly')
    let monthly = document.querySelector('.monthly')
    let imgCard = document.querySelectorAll('.img_card')
    let backgroundCard = document.querySelectorAll('.background')
    let titleCard = document.querySelectorAll('.title_card')
    let currentTime = document.querySelectorAll('.current_time')
    let lastTime = document.querySelectorAll('.last_time')
    let currentOption = 'weekly'

    daily.addEventListener('click', () => {
      document.querySelector(`.${currentOption}`).classList.remove('current_option')
      daily.classList.add('current_option')
      currentOption = 'daily'
      setData()
    })

    weekly.addEventListener('click', () => {
      document.querySelector(`.${currentOption}`).classList.remove('current_option')
      weekly.classList.add('current_option')
      currentOption = 'weekly'
      setData()
    })

    monthly.addEventListener('click', () => {
      document.querySelector(`.${currentOption}`).classList.remove('current_option')
      monthly.classList.add('current_option')
      currentOption = 'monthly'
      setData()
    })

    function setData() {
      fetch('data.json').then((response) => {
        response.json().then((activities) => {
          for (let i = 0; i < titleCard.length; i++) {
            titleCard[i].innerHTML = activities[i].title
            currentTime[i].innerHTML = `${activities[i]['timeframes'][currentOption]['current']}hrs`
            lastTime[i].innerHTML =
              `Last ${(currentOption.replace('ily','y').replace('ly', ''))} - ${activities[i]['timeframes'][currentOption]['previous']}hrs`
            backgroundCard[i].style.backgroundColor = `var(--${activities[i].color})`
            imgCard[i].src =
              `images/icon-${((titleCard[i].innerHTML).replace(' ', '-')).toLocaleLowerCase()}.svg`
          }
        })
      })
    }

    setData()
  </script>
</body>

</html>